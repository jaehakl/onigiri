
# Onigiri - 일본 노래 가사 단어 학습기

## 기술 구현 계획서

### 데이터베이스 및 스토리지

#### 데이터베이스 (DB):
    - **역할:** 단어, 예문(텍스트), 사용자 정보, 학습 기록(퀴즈 결과 등)을 저장한다.
    - **구조:**
        - Words 테이블: 단어 정보 및 JLPT 레벨, 카테고리 등 메타데이터 포함.
        - Examples 테이블: 예문 텍스트, 단어 ID, 목적별 태그 포함.
        - Images 테이블 :
        - Audios 테이블 :
        (초기단계에는 회원가입 기능을 구현하지 않고 유저 정보는 로컬스토리지에 저장한다.)
        - Users 테이블: 사용자 정보. 
        - LearningLogs 테이블: 사용자 ID, 단어 ID, 퀴즈 유형, 정답 여부 등 로그 기록.
            
#### 서버 및 클라우드 스토리지 (e.g., AWS S3):
    - **서버:** 저사양 클라우드 컴퓨팅 인스턴스(e.g., t-series) 또는 서버리스(e.g., AWS Lambda) 아키텍처를 사용하여 초기 고정 비용을 최소화한다.
    - **클라우드 스토리지:** 생성된 음성 파일 및 이미지 파일을 저장한다.
    - **연동 방식:** 데이터베이스에는 파일의 URL 경로만 저장하고, 클라이언트가 해당 URL을 통해 직접 파일에 접근하도록 한다.
    - **콘텐츠 전송:** 음성/이미지 파일 전송 시 CDN(Content Delivery Network)을 활용하여 전송 속도를 높이고 데이터 전송 비용을 최적화한다.


### 서비스

#### 일본어 형태소 분석
- **구현 방식:** 서버 사이드에서 형태소 분석을 실행한다.
- **선택 기술:** MeCab, SudachiPy 등 검증된 오픈소스 일본어 형태소 분석기 라이브러리를 서버 애플리케이션에 통합하여 사용한다.
- **처리 흐름:** 사용자로부터 텍스트를 입력받으면, 서버에서 해당 라이브러리를 호출하여 형태소 분석(단어 원형 추출, 품사 태깅 등)을 수행하고 결과를 클라이언트에 반환한다.

#### 맞춤형 단어 목록
- 형태소 분석을 통해 추출된 단어 목록(Words.id 리스트) 및 유저 정보를 받으면, 단어와 관련된 기본정보, 이미지url, 예문, 음성url, 사용자의 이해도 등을 맞춤형으로 제공



### 페이지

#### 가사 입력 및 해석
- 가사를 클립보드를 통해 복사해 넣고, '학습하기' 버튼을 누른다. 데이터 로딩이 끝나면 입력창은 숨김 처리되고 가사가 렌더링되어 나타난다.
- 입력한 일본어 가사에 추출된 단어를 강조표시하여 출력한다. 사용자의 이해도 Level 에 따라 색을 다르게 한다. 단어를 클릭하면 상호작용이 가능하다.
- 단어 카드 목록이 아래에 표시된다.

#### 단어 상세 페이지    
    - **일본어 단어 표기:** 한자 및 히라가나/가타카나.
    - **발음:** 히라가나/가타카나 표기 및 원어민 음성.
    - **한국어 뜻:** 가장 핵심적인 의미.
    - **상징 이미지:** 해당 단어의 의미와 뉘앙스를 시각적으로 표현한 고유의 AI 생성 이미지.
    - **맞춤 예문 세트:**
        - 사용자가 설정한 학습 목적(여행, 시험, 애니 등)에 부합하는 예문을 우선적으로 노출해야 한다.
        - 모든 예문은 텍스트와 함께 원어민 음성을 제공해야 한다.
    - 사용자의 이해도 수준
    - 사용자 오답노트(삭제 가능)


#### 퀴즈 시스템
- 퀴즈 제작 및 채점은 단어 데이터를 기반으로 프론트엔드에서 진행
- **퀴즈 유형:**
    - 단어 ↔ 뜻 맞히기 (객관식/단답형)
    - 단어 ↔ 발음 맞히기 (객관식/단답형)
    - 단어 ↔ 이미지 연결하기 (객관식)
    - 예문 빈칸 채우기 (객관식/단답형)
    - 예문 듣고 빈칸 채우기 (객관식)
    - 단어 배열하여 문장 완성하기
    - 예문 ↔ 뜻 번역하기 (자기 주도 채점 방식)
- **서술형 문제 채점:**
    - **구현 방식:** 서버에서의 자동 채점을 구현하지 않는다.
    - **프로세스:** 사용자가 서술형 답안을 제출하면, 서버는 DB에 저장된 모범 답안을 클라이언트로 전송한다. 클라이언트에서 사용자의 답과 모범 답안을 나란히 보여주고, 사용자 스스로 '맞음/틀림'을 선택하게 하는 '자기 주도 채점' 방식을 채택한다. 서버는 사용자의 최종 선택 결과(O/X)만 기록한다.
- 퀴즈 진행 중 즉각적인 정답/오답 피드백 및 간략한 해설을 제공해야 한다.
- 문제풀이가 모두 종료되면, 그 결과를 서버(초기단계에는 로컬스토리지)로 전송하여 기록한다.
- **보상:** '교재'를 100% 완료했을 때, 명확한 축하 메시지와 함께 학습 전/후의 성장 리포트를 제공하고, 최종 보상으로 '이제 노래가 들리는 경험'을 하도록 유도해야 한다.


#### 스탯 대시보드
- **데이터 처리:**
    - **구현 방식:** 사용자 요청 시마다 실시간으로 모든 로그를 계산하지 않는다.
    - **프로세스:** 주기적으로(예: 매일 자정) 실행되는 백그라운드 작업을 통해, LearningLogs 테이블의 데이터를 집계 및 분석한다. 분석된 결과(분야별 숙련도, 정답률 등)를 별도의 UserStats 테이블에 요약하여 저장한다.        
- **데이터 제공:** 클라이언트가 스탯 대시보드를 요청하면, 서버는 미리 계산된 UserStats 테이블의 데이터를 조회하여 즉시 반환한다.

- 사용자의 모든 학습 활동을 기록하고 분석하여, 성장의 여정을 시각적으로 확인할 수 있는 개인 대시보드를 제공해야 한다.
- **포함될 시각화 데이터:**
    - **종합 능력치 차트:** 어휘력, 문법, 청해력, 독해력, 속도 등을 나타내는 오각형 레이더 차트.
    - **분야별 숙련도:** JLPT 급수, 학습 목적(주제), 품사별 학습 진행도를 나타내는 프로그레스 바.
    - **학습 습관 트래킹:** 일일 학습 여부를 기록하는 학습 캘린더(잔디) 및 연속 학습일 표시.
    - **누적 성장 그래프:** 총 학습 단어 수의 변화를 보여주는 시계열 그래프.


